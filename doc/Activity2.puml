@startuml
skinparam dpi 512
(*) --> 用户HTTP请求
if "判断内容类型" then
    -->[文本] ===B1===
    --> 加载敏感词典
    --> 敏感词过滤
    --> ===B2===
'
    ===B1=== --> 分发请求到推理端
           --> ===B11===
           --> 中文违规文本检测
           --> ===B12===

           ===B11=== --> 英文违规文本检测
           --> ===B12===

          ===B11=== --> 请求超时
          --> ===B12===
''            while (请求超时？) is (否)
''                :继续等待;
''            endwhile (是)
'
    --> ===B2===

else
-->[图片] RDC

'else (图片)
'    :分发请求到推理端;
'    fork
'        fork
'            :色情图片检测;
'        fork again
'            :抗议/暴恐图片检测;
'        end fork
'    fork again
'        while (处理超时？) is (否)
'            :继续等待;
'        endwhile (是)
'    end merge
'endif
endif
--> 处理结果生成报告
--> HTTP返回建议
--> (*)
@enduml